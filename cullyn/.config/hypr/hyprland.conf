# ┬ ┬┬ ┬┌─┐┬─┐┬  ┌─┐┌┐┌┌┬┐  ┌─┐┌─┐┌┐┌┌─┐┬┌─┐
# ├─┤└┬┘├─┘├┬┘│  ├─┤│││ ││  │  │ ││││├┤ ││ ┬
# ┴ ┴ ┴ ┴  ┴└─┴─┘┴ ┴┘└┘─┴┘  └─┘└─┘┘└┘└  ┴└─┘

# monitors
monitor=HDMI-A-1,3840x2160@60,0x0,1
monitor=HDMI-A-1,addreserved,69,60,29,29

# default workspace rules
windowrule=workspace 1 silent,discord
windowrule=workspace 2 silent,zoom
windowrule=workspace 5,youtube-music-desktop-app

# center float (select windows)
$centerfloat=title:(File)|(Select)|(Save)|(youtube-music-desktop-app)|(save)|^(?![\s\S])
windowrule=float,$centerfloat
windowrule=center,$centerfloat

# center float (terminals)
$terminalfloat=title:(terminalfloat)
windowrule=float,$terminalfloat
windowrule=size 2497 1614,$terminalfloat
windowrule=center,$terminalfloat

$smallfloat=title:(smallfloat)
windowrule=float,$smallfloat
windowrule=size 1024 1024,$smallfloat
windowrule=move 64 1024,$smallfloat

windowrule=opacity 0.69,title:(cava)

# startup events
exec-once=hyprpaper
exec-once=dunst
exec-once=~/.local/bin/import-gsetting
exec-once=~/.local/bin/hyprstart
exec-once=~/.config/eww/scripts/start_continuous
exec-once=~/.local/bin/eww-open

general {
    sensitivity=1
    apply_sens_to_raw=0
    main_mod=SUPER
    border_size=3
    no_border_on_floating=0
    gaps_in=8
    gaps_out=0
    col.active_border=0xFF7aa2f7
    col.inactive_border=0xFF3f4e74
    cursor_inactive_timeout=3
    damage_tracking=full
    layout=dwindle
}

decoration {
    rounding=16
    multisample_edges=1
    active_opacity=0.96
    inactive_opacity=0.85
    fullscreen_opacity=1
    blur=1
    blur_size=3
    blur_passes=1
    blur_ignore_opacity=1
    drop_shadow=1
    shadow_range=24
    shadow_render_power=2
    shadow_ignore_window=1
    col.shadow=0xCC041329
    shadow_offset=2 4
}

animations {
    enabled=1
    bezier=jerk,1, -0.36, 0.72, 1.2
    bezier=snap,0,0.25,0.5,1.6
    animation=windows,1,3,snap,popin
    animation=border,1,3,snap,
    animation=fade,1,3,snap,
    animation=workspaces,1,4,jerk,slide
}

input {
    follow_mouse=1
    sensitivity=1 #TODO: update sensitivity via mouse directly, instead of here.
}

dwindle {
    pseudotile=0
    force_split=2
}

bindm=SUPER,mouse:272,movewindow
bindm=SUPER,mouse:273,resizewindow

# applications
$term = kitty
$browser = firefox-developer-edition --new-window
bind=SUPER,RETURN,exec,$term
bind=ALT,RETURN,exec,$term
bind=SUPER,F,exec,$browser
bind=SUPERSHIFT,C,exec, $browser https://calendar.google.com/calendar/u/0/r
bind=SUPER,N,exec,kitty --title="terminalfloat" --working-directory="dotfiles" # centered floating terminal
bind=SUPER,P,exec,wofi --show drun
bind=ALT,Z,exec,wlogout # TODO: upadte with rofi menu selection menu

# resize windows
bind=ALT,W,resizeactive,exact 1023 1024
bind=ALT,F,resizeactive,exact 1708 997

# basic commands
bind=SUPER,X,killactive,
bind=ALT,X,killactive,
bind=SUPERSHIFT,X,exec,hyprctl kill
bind=SUPER,L,togglefloating,
bind=SUPER,A,exec,hyprctl dispatch fullscreen 0

# kill persistent applications
bind=CTRLSHIFT,D,exec,pkill discord
bind=CTRLSHIFT,Z,exec,pkill zoom

# move focus within workspace
bind=ALT,s,movefocus,l
bind=ALT,t,movefocus,r
bind=ALT,r,movefocus,u
bind=ALT,e,movefocus,d
bind=ALT,g,cyclenext,prev

# move window within workspace
bind=ALTSUPER,Left,movewindow,l
bind=ALTSUPER,Right,movewindow,r
bind=ALTSUPER,Up,movewindow,u
bind=ALTSUPER,Down,movewindow,d

# move to workspace
bind=SUPER,s,workspace,1
bind=SUPER,e,workspace,2
bind=SUPER,t,workspace,3
bind=SUPERSHIFT,t,workspace,4
bind=SUPER,g,workspace,5

# open workspace layout
bind=ALTSUPER,s,exec,~/.local/bin/layout discord
bind=ALTSUPER,e,exec,~/.local/bin/layout zoom
bind=ALTSUPER,t,exec,~/.local/bin/layout code
bind=ALTSUPERSHIFT,t,exec,~/.local/bin/layout dotfiles


# quickly disconnect / connect to headphones if bluetooth is being dumb
$headphones = 14:3F:A6:10:A1:B5
bind=ALT,A,exec,bluetoothctl connect $headphones
bind=ALT,D,exec,bluetoothctl disconnect $headphones

# media controls
bind=,208,exec,playerctl --player=youtube-music-desktop-app play
bind=,209,exec,playerctl --player=youtube-music-desktop-app pause
bind=SUPERSHIFT,F,exec,playerctl --player=youtube-music-desktop-app play-pause
bind=SUPERSHIFT,P,exec,playerctl --player=youtube-music-desktop-app play-pause
bind=,171,exec,playerctl --player=youtube-music-desktop-app next
bind=SUPERSHIFT,N,exec,playerctl --player=youtube-music-desktop-app next
bind=,173,exec,playerctl --player=youtube-music-desktop-app previous
bind=SUPERSHIFT,Y,exec,playerctl --player=youtube-music-desktop-app previous

# simple color picker
bind=ALT,C,exec,grim -g "$(slurp -p)" -t ppm - | convert - -format '%[pixel:p{0,0}]' txt:- | tail -n 1 | cut -d ' ' -f 4 | wl-copy

#Screenshots
bind=CTRLSHIFTSUPER,B,exec,grim -g "$(slurp)" - | wl-copy
bind=CTRLSHIFTSUPER,C,exec,grim -g "$(slurp)" ~/media/screenshots/$(date +%F_%T_slurp).png

#Recordings
bind=CTRLSHIFTSUPER,S,exec,wf-recorder --audio=bluez_output.14_3F_A6_10_A1_B5.a2dp-sink.monitor --file=$HOME/media/recordings/$(date +%F_%T_full).mp4 & notify-send "recording started"
bind=CTRLSHIFTSUPER,D,exec,wf-recorder -g "$(slurp)" --file=$HOME/media/recordings/$(date +%F_%T_slurp).mp4 -c "h264_vaapi" -d /dev/dri/renderD128 & notify-send "recording started"
bind=CTRLSHIFTSUPER,G,exec,killall wf-recorder -2 && notify-send "recording ended"
