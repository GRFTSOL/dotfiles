; ┌┬┐┌─┐┌┬┐┌─┐
;  ││├─┤ │ ├┤
; ─┴┘┴ ┴ ┴ └─┘
; --------------------------------------------------------------------------vvv
(defpoll date :interval "1s"
  "date '+ %A, %B %d'"
)

(defpoll time :interval "1s"
  "date '+ %H:%M'"
)
; --------------------------------------------------------------------------^^^

; ┬ ┬┌─┐┌─┐┌┬┐┬ ┬┌─┐┬─┐
; │││├┤ ├─┤ │ ├─┤├┤ ├┬┘
; └┴┘└─┘┴ ┴ ┴ ┴ ┴└─┘┴└─
; --------------------------------------------------------------------------vvv
(defpoll weather :interval "1m"  "python ~/.config/eww/scripts/weather.py")
; --------------------------------------------------------------------------^^^


; ┌┬┐┬ ┬┌─┐┬┌─┐
; ││││ │└─┐││
; ┴ ┴└─┘└─┘┴└─┘
; --------------------------------------------------------------------------vvv
(defpoll status :interval "0.2s"  "~/.config/eww/scripts/music_info status")
(defpoll cover :interval "1s"  "~/.config/eww/scripts/music_info cover")
(defpoll song :interval "1s"  "~/.config/eww/scripts/music_info song")
(defpoll artist :interval "1s"  "~/.config/eww/scripts/music_info artist")
(defpoll duration :interval "1s"  "~/.config/eww/scripts/music_info duration")
(defpoll volume :interval "1s"  "~/.config/eww/scripts/music_info volume")

(defwidget music []
  (box
    :class "music-box"
    :orientation "h"
    :haligh "center"
    :spacing 16
    :space-evenly false
    (label :class "music-status" :text status)
    (image :class "music-cover" :path cover :image-width 32 :image-height 32)
    song
    (label :markup artist)
    duration
    (label :markup volume )
  )
)
; --------------------------------------------------------------------------^^^


; ┌─┐┌─┐┌─┐┌─┐┬┌─┌─┐┬─┐
; └─┐├─┘├┤ ├─┤├┴┐├┤ ├┬┘
; └─┘┴  └─┘┴ ┴┴ ┴└─┘┴└─
; --------------------------------------------------------------------------vvv
(defwidget speaker []
  "speaker"
)
; --------------------------------------------------------------------------^^^


; ┌┬┐┬┌─┐
; │││││
; ┴ ┴┴└─┘
; --------------------------------------------------------------------------vvv
(defwidget mic []
  "mic"
)
; --------------------------------------------------------------------------^^^


; ┌─┐┌─┐┬ ┬
; │  ├─┘│ │
; └─┘┴  └─┘
; --------------------------------------------------------------------------vvv
(defwidget cpu []
  "cpu"
)
; --------------------------------------------------------------------------^^^


; ┌┬┐┌─┐┌┬┐┌─┐┬─┐┬ ┬
; │││├┤ ││││ │├┬┘└┬┘
; ┴ ┴└─┘┴ ┴└─┘┴└─ ┴
; --------------------------------------------------------------------------vvv
(defwidget memory []
  "memory"
)
; --------------------------------------------------------------------------^^^


; ┌─┐┌─┐┬ ┬
; │ ┬├─┘│ │
; └─┘┴  └─┘
; --------------------------------------------------------------------------vvv
(defwidget gpu []
  "gpu"
)
; --------------------------------------------------------------------------^^^


; ┌┬┐┌─┐┌┬┐┌─┐
;  │ ├┤ │││├─┘
;  ┴ └─┘┴ ┴┴
; --------------------------------------------------------------------------vvv
(defwidget temp []
  "temp"
)
; --------------------------------------------------------------------------^^^


; ┌─┐┌─┐┌─┐┌┬┐┌─┐┌┐┌
; ├─┘├─┤│  │││├─┤│││
; ┴  ┴ ┴└─┘┴ ┴┴ ┴┘└┘
; --------------------------------------------------------------------------vvv
(defwidget pacman []
  "pacman"
)
; --------------------------------------------------------------------------^^^


; ┬ ┬┌─┐┬─┐┬┌─┌─┐┌─┐┌─┐┌─┐┌─┐┌─┐
; ││││ │├┬┘├┴┐└─┐├─┘├─┤│  ├┤ └─┐
; └┴┘└─┘┴└─┴ ┴└─┘┴  ┴ ┴└─┘└─┘└─┘
; --------------------------------------------------------------------------vvv
(defwidget workspaces []
  "workspaces"
)
; --------------------------------------------------------------------------^^^


; ┌┐┌┌─┐┌┬┐┬ ┬┌─┐┬─┐┬┌─
; │││├┤  │ ││││ │├┬┘├┴┐
; ┘└┘└─┘ ┴ └┴┘└─┘┴└─┴ ┴
; --------------------------------------------------------------------------vvv
(defwidget network []
  "network"
)
; --------------------------------------------------------------------------^^^


; ████████╗ ██████╗ ██████╗
; ╚══██╔══╝██╔═══██╗██╔══██╗
;    ██║   ██║   ██║██████╔╝
;    ██║   ██║   ██║██╔═══╝
;    ██║   ╚██████╔╝██║
;    ╚═╝    ╚═════╝ ╚═╝
; --------------------------------------------------------------------------vvv
(defwindow top-bar
  :monitor 0
  :geometry (geometry
    :y "6px"
    :width "100%"
    :height "36px"
    :anchor "top center"
  )
  :stacking "fg"
  :exclusive true
  :focusable false
  (box
    :class "top-bar-box"
    :orientation "h"
    :haligh "center"
    :space-evenly true
    (top-left)
    (top-center)
    (top-right)
  )
)

(defwidget top-left []
  (box
    :class "top-left"
    :orientation "h"
    :haligh "start"
    :spacing 16
    :space-evenly false
    date
    time
    weather
  )
)

(defwidget top-center []
  (box
    :class "top-center"
    :orientation "h"
    :halign "center"
    :spacing 16
    :space-evenly false
    (mic)
    (music)
    (speaker)
  )
)

(defwidget top-right []
  (box
    :class "top-right"
    :orientation "h"
    :halign "end"
    :spacing 16
    :space-evenly false
    (cpu)
    (memory)
    (gpu)
    (temp)
  )
)
; --------------------------------------------------------------------------^^^


; ██████╗  ██████╗ ████████╗
; ██╔══██╗██╔═══██╗╚══██╔══╝
; ██████╔╝██║   ██║   ██║
; ██╔══██╗██║   ██║   ██║
; ██████╔╝╚██████╔╝   ██║
; ╚═════╝  ╚═════╝    ╚═╝
; --------------------------------------------------------------------------vvv
(defwindow bot-bar
  :monitor 0
  :geometry (geometry
    :y "6px"
    :width "100%"
    :height "36px"
    :anchor "bottom center"
  )
  :stacking "fg"
  :exclusive true
  :focusable false
  (box
    :class "bot-bar-box"
    :orientation "h"
    :haligh "center"
    :space-evenly true
    (bot-left)
    (bot-center)
    (bot-right)
  )
)

(defwidget bot-left []
  (box
    :class "bot-left"
    :orientation "h"
    :haligh "start"
    :spacing 16
    :space-evenly false
    (pacman)
  )
)

(defwidget bot-center []
  (box
    :class "bot-center"
    :orientation "h"
    :halign "center"
    :spacing 16
    :space-evenly false
    (workspaces)
  )
)

(defwidget bot-right []
  (box
    :class "bot-right"
    :orientation "h"
    :halign "end"
    :spacing 16
    :space-evenly false
    (network)
  )
)
; --------------------------------------------------------------------------^^^
