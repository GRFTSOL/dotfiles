#!/usr/bin/env bash

left_window='1023 1024'
center_window='1708 997'
right_window='1009 1701'

discord () {
    hyprctl dispatch workspace 1
    tmux select-window -t :1
    tmux select-window -t :1
    kitty --hold --working-directory=notes -e tmux attach -t  & sleep 0.5
    exec discord & sleep 6
    hyprctl dispatch movefocus l
    hyprctl dispatch resizeactive 'exact 1023 1811'
    hyprctl dispatch movefocus r firefox-developer-edition --new-window https://www.twitch.tv/directory/following & sleep 1
    kitty --hold -e tmux attach -t  & sleep 0.5
    hyprctl dispatch movefocus u
    hyprctl dispatch resizeactive 'exact 1355 1058'
    hyprctl dispatch movefocus l
    hyprctl dispatch resizeactive 'exact 1641 1863'
    hyprctl dispatch movefocus l
}

zoom () {
    hyprctl dispatch workspace 2
    tmux select-window -t :1
    tmux select-window -t :1
    kitty --hold --working-directory=notes -e tmux attach -t  & sleep 0.5
    firefox-developer-edition --new-window https://www.youtube.com/feed/subscriptions & sleep 1
    hyprctl dispatch movefocus l
    hyprctl dispatch resizeactive 'exact 1023 1811'
    hyprctl dispatch movefocus r
    exec zoom & sleep 6
    kitty --hold -e tmux attach -t  & sleep 0.5
    hyprctl dispatch movefocus u
    hyprctl dispatch resizeactive 'exact 1355 1058'
    hyprctl dispatch movefocus l
    hyprctl dispatch resizeactive 'exact 1641 1496'
    hyprctl dispatch movefocus l
}

code () {
    hyprctl dispatch workspace 3
    tmux select-window -t ﮂ:1
    kitty --hold --working-directory=notes -e tmux attach -t ﮂ & sleep 0.5
    firefox-developer-edition --new-window https://calendar.google.com/calendar/u/0/r & sleep 1.5
    hyprctl dispatch movefocus l
    hyprctl dispatch resizeactive 'exact 1023 1811'
    hyprctl dispatch movefocus r
    kitty --hold -e tmux attach -t ﳣ & sleep 0.5
    hyprctl dispatch movefocus r
    hyprctl dispatch movefocus l
    hyprctl dispatch movefocus r
    kitty --hold --title="cava" -e cava & sleep 0.5
    hyprctl dispatch movefocus u
    hyprctl dispatch resizeactive 'exact 1631 1863'
    hyprctl dispatch movefocus l
    hyprctl dispatch movefocus l
}

dotfiles () {
    hyprctl dispatch workspace 4
    kitty --hold --working-directory="$HOME/dotfiles/" -e nvim & sleep 0.5
    firefox-developer-edition --new-window https://calendar.google.com/calendar/u/0/r & sleep 1.5
    hyprctl dispatch movefocus l
    hyprctl dispatch resizeactive "exact $left_window"
    hyprctl dispatch movefocus r
    kitty --hold --title="pipes-rs" -e pipes-rs & sleep 0.5
    hyprctl dispatch movefocus l
    hyprctl dispatch resizeactive "exact $center_window"
    hyprctl dispatch movefocus r
    kitty --hold -o font_size=2.0 --title="cava" -e cava & sleep 0.5
    hyprctl dispatch movefocus u
    hyprctl dispatch resizeactive "exact $right_window"
    hyprctl dispatch movefocus l
    hyprctl dispatch movefocus l
}

online=1
connection () {
    nc -z 8.8.8.8 53  >/dev/null 2>&1
    online=$?
    echo "connect: $online"
}

while [[ "$online" -eq 1 ]]; do
    connection
    sleep 0.5
done

hyprctl keyword input:follow_mouse 0
notify-send "opening $1 layout"
"$1"
hyprctl keyword input:follow_mouse 1

exit 0
